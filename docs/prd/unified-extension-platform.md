# ProxyCast ç»Ÿä¸€æ‰©å±•å¹³å°æ¶æ„ PRD

> ç‰ˆæœ¬: 1.0.0
> æ—¥æœŸ: 2026-01-05
> çŠ¶æ€: Draft

---

## ä¸€ã€èƒŒæ™¯ä¸ç›®æ ‡

### 1.1 èƒŒæ™¯

å½“å‰ ProxyCast å·²æœ‰å¤šç§æ‰©å±•èƒ½åŠ›ï¼Œä½†åˆ†æ•£åœ¨ä¸åŒç³»ç»Ÿä¸­ï¼š

| ç°æœ‰èƒ½åŠ› | å®ç°æ–¹å¼ | é—®é¢˜ |
|---------|---------|------|
| Skills | ç‹¬ç«‹ç³»ç»Ÿ | ä¸å…¶ä»–æ‰©å±•éš”ç¦» |
| OAuth Provider | ç¡¬ç¼–ç æšä¸¾ | æ–°å¢éœ€æ”¹æ ¸å¿ƒä»£ç  |
| API Key Provider | æ•°æ®åº“é¢„è®¾ | æ— æ³•ç‹¬ç«‹æ›´æ–° |
| å·¥å…·ç±» (MachineIdTool) | ç‹¬ç«‹æ’ä»¶ | ç¼ºä¹ç»Ÿä¸€ç®¡ç† |

### 1.2 ç›®æ ‡

æ„å»º **ç»Ÿä¸€æ‰©å±•å¹³å°**ï¼Œå®ç°ï¼š

1. **å¤šç±»å‹æ‰©å±•æ”¯æŒ**ï¼šSkillsã€Token ä¾›åº”å•†ã€OAuth å‡­è¯ã€å·¥å…·ç±»ç­‰
2. **æœåŠ¡å•†ç”Ÿæ€**ï¼šå„æœåŠ¡å•†å¯å‘å¸ƒè‡ªå·±çš„æ‰©å±•åº”ç”¨
3. **ç»Ÿä¸€æ‰©å±•ä¸­å¿ƒ**ï¼šä¸€ä¸ªå…¥å£ç®¡ç†æ‰€æœ‰ç±»å‹çš„æ‰©å±•
4. **ç‹¬ç«‹æ›´æ–°**ï¼šæ‰©å±•å¯ç‹¬ç«‹å®‰è£…ã€æ›´æ–°ã€å¸è½½
5. **å¼€æ”¾ç”Ÿæ€**ï¼šç¬¬ä¸‰æ–¹å¼€å‘è€…å¯è´¡çŒ®æ‰©å±•

---

## äºŒã€æ‰©å±•ç±»å‹å®šä¹‰

### 2.1 æ‰©å±•ç±»å‹æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ProxyCast ç»Ÿä¸€æ‰©å±•å¹³å°                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Skills    â”‚ â”‚   Token     â”‚ â”‚   OAuth     â”‚ â”‚   Tools     â”‚       â”‚
â”‚  â”‚   æŠ€èƒ½åŒ…    â”‚ â”‚   ä¾›åº”å•†    â”‚ â”‚   å‡­è¯      â”‚ â”‚   å·¥å…·ç±»    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  Provider   â”‚ â”‚  Protocol   â”‚ â”‚   Theme     â”‚                        â”‚
â”‚  â”‚  æœåŠ¡å•†æ’ä»¶ â”‚ â”‚  åè®®æ‰©å±•   â”‚ â”‚   ä¸»é¢˜åŒ…    â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ‰©å±•ç±»å‹è¯¦è§£

| ç±»å‹ | ID | è¯´æ˜ | ç¤ºä¾‹ |
|------|-----|------|------|
| **Skills** | `skill` | AI æŠ€èƒ½åŒ…ï¼Œæ‰©å±• Agent èƒ½åŠ› | ä»£ç å®¡æŸ¥ã€ç¿»è¯‘ã€å†™ä½œ |
| **Token ä¾›åº”å•†** | `token_provider` | æä¾› API Key çš„ç¬¬ä¸‰æ–¹æœåŠ¡ | OpenRouterã€TogetherAI |
| **OAuth å‡­è¯** | `oauth_provider` | ç¬¬ä¸‰æ–¹ OAuth æˆæƒæœåŠ¡ | Kiroã€Claude OAuthã€Gemini |
| **å·¥å…·ç±»** | `tool` | å®ç”¨å·¥å…· | Machine IDã€Browser Interceptor |
| **æœåŠ¡å•†æ’ä»¶** | `vendor` | æœåŠ¡å•†å®˜æ–¹åº”ç”¨ | Anthropic å®˜æ–¹ã€OpenAI å®˜æ–¹ |
| **åè®®æ‰©å±•** | `protocol` | æ–°åè®®æ”¯æŒ | Doubaoã€Wenxin |
| **ä¸»é¢˜åŒ…** | `theme` | UI ä¸»é¢˜ | Dark Proã€Light Minimal |

---

## ä¸‰ã€ç»Ÿä¸€æ‰©å±•æ¶æ„

### 3.1 æ ¸å¿ƒæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Extension Platform Core                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    ExtensionRegistry (ç»Ÿä¸€æ³¨å†Œè¡¨)                 â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  extensions: HashMap<ExtensionId, Arc<dyn Extension>>            â”‚    â”‚
â”‚  â”‚  type_index: HashMap<ExtensionType, Vec<ExtensionId>>            â”‚    â”‚
â”‚  â”‚  vendor_index: HashMap<VendorId, Vec<ExtensionId>>               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    ExtensionLoader (åŠ è½½å™¨)                       â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  - æ‰«æ ~/.proxycast/extensions/                                 â”‚    â”‚
â”‚  â”‚  - è§£æ extension.json                                           â”‚    â”‚
â”‚  â”‚  - åŠ è½½äºŒè¿›åˆ¶/è„šæœ¬/UI                                            â”‚    â”‚
â”‚  â”‚  - éªŒè¯ç­¾åå’Œæƒé™                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    ExtensionHost (å®¿ä¸»ç¯å¢ƒ)                       â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  - ç”Ÿå‘½å‘¨æœŸç®¡ç† (init/start/stop/unload)                         â”‚    â”‚
â”‚  â”‚  - æƒé™æ²™ç®±                                                      â”‚    â”‚
â”‚  â”‚  - èµ„æºéš”ç¦»                                                      â”‚    â”‚
â”‚  â”‚  - SDK æ³¨å…¥                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Extension Trait (ç»Ÿä¸€æ¥å£)

```rust
/// ç»Ÿä¸€æ‰©å±•æ¥å£ - æ‰€æœ‰æ‰©å±•ç±»å‹çš„åŸºç¡€ trait
#[async_trait]
pub trait Extension: Send + Sync {
    // ========== åŸºç¡€ä¿¡æ¯ ==========
    
    /// æ‰©å±•å”¯ä¸€ ID (å¦‚ "kiro-provider", "code-review-skill")
    fn id(&self) -> &str;
    
    /// æ‰©å±•ç±»å‹
    fn extension_type(&self) -> ExtensionType;
    
    /// æ˜¾ç¤ºåç§°
    fn display_name(&self) -> &str;
    
    /// ç‰ˆæœ¬å·
    fn version(&self) -> &str;
    
    /// æè¿°
    fn description(&self) -> &str { "" }
    
    /// ä½œè€…/æœåŠ¡å•†
    fn vendor(&self) -> Option<&VendorInfo> { None }
    
    /// å›¾æ ‡
    fn icon(&self) -> Option<&str> { None }
    
    // ========== èƒ½åŠ›å£°æ˜ ==========
    
    /// æ‰©å±•æ¸…å•
    fn manifest(&self) -> &ExtensionManifest;
    
    /// æ‰€éœ€æƒé™
    fn required_permissions(&self) -> Vec<Permission> { vec![] }
    
    /// é…ç½® Schema (JSON Schema)
    fn config_schema(&self) -> serde_json::Value { serde_json::json!({}) }
    
    // ========== ç”Ÿå‘½å‘¨æœŸ ==========
    
    /// åˆå§‹åŒ–
    async fn init(&mut self, ctx: &ExtensionContext) -> Result<()>;
    
    /// å¯åŠ¨
    async fn start(&mut self) -> Result<()> { Ok(()) }
    
    /// åœæ­¢
    async fn stop(&mut self) -> Result<()> { Ok(()) }
    
    /// å¸è½½å‰æ¸…ç†
    async fn unload(&mut self) -> Result<()> { Ok(()) }
    
    // ========== é…ç½®ç®¡ç† ==========
    
    /// è·å–å½“å‰é…ç½®
    fn get_config(&self) -> serde_json::Value { serde_json::json!({}) }
    
    /// æ›´æ–°é…ç½®
    async fn update_config(&mut self, config: serde_json::Value) -> Result<()> { Ok(()) }
}

/// æ‰©å±•ç±»å‹æšä¸¾
#[derive(Clone, Copy, Debug, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum ExtensionType {
    Skill,           // AI æŠ€èƒ½åŒ…
    TokenProvider,   // Token ä¾›åº”å•†
    OAuthProvider,   // OAuth å‡­è¯
    Tool,            // å·¥å…·ç±»
    Vendor,          // æœåŠ¡å•†æ’ä»¶
    Protocol,        // åè®®æ‰©å±•
    Theme,           // ä¸»é¢˜åŒ…
}

/// æœåŠ¡å•†ä¿¡æ¯
#[derive(Clone, Debug, Serialize, Deserialize)]
pub struct VendorInfo {
    pub id: String,           // "anthropic", "openai", "google"
    pub name: String,         // "Anthropic"
    pub homepage: String,     // "https://anthropic.com"
    pub verified: bool,       // æ˜¯å¦å®˜æ–¹è®¤è¯
    pub logo: Option<String>, // Logo URL
}
```

### 3.3 æ‰©å±•æ¸…å• (extension.json)

```json
{
  "$schema": "https://proxycast.dev/schemas/extension.json",
  
  "id": "kiro-provider",
  "type": "oauth_provider",
  "version": "1.2.0",
  "name": "Kiro Provider",
  "description": "AWS CodeWhisperer OAuth å‡­è¯ç®¡ç†ï¼Œæ”¯æŒ Claude æ¨¡å‹",
  
  "vendor": {
    "id": "proxycast",
    "name": "ProxyCast Team",
    "homepage": "https://github.com/aiclientproxy",
    "verified": true
  },
  
  "license": "MIT",
  "homepage": "https://github.com/aiclientproxy/kiro-provider",
  "repository": "https://github.com/aiclientproxy/kiro-provider",
  
  "min_proxycast_version": "2.0.0",
  
  "permissions": [
    "database:read",
    "database:write",
    "http:request",
    "crypto:encrypt",
    "fs:read:credentials"
  ],
  
  "entry": {
    "type": "binary",
    "binary_name": "kiro-provider-cli",
    "platform_binaries": {
      "macos-arm64": "bin/kiro-provider-aarch64-apple-darwin",
      "macos-x64": "bin/kiro-provider-x86_64-apple-darwin",
      "linux-x64": "bin/kiro-provider-x86_64-unknown-linux-gnu",
      "windows-x64": "bin/kiro-provider-x86_64-pc-windows-msvc.exe"
    }
  },
  
  "ui": {
    "entry": "dist/index.js",
    "styles": "dist/styles.css",
    "surfaces": ["extension_center", "provider_pool"],
    "icon": "Cloud",
    "width": 800,
    "height": 600
  },
  
  "config_schema": {
    "type": "object",
    "properties": {
      "risk_control": {
        "type": "object",
        "properties": {
          "machine_id_rotation": { "type": "boolean", "default": true },
          "version_spoofing": { "type": "boolean", "default": true }
        }
      }
    }
  },
  
  "capabilities": {
    "oauth_provider": {
      "target_protocol": "anthropic",
      "supported_models": ["claude-*"],
      "auth_types": ["oauth"],
      "credential_schema": {
        "type": "object",
        "required": ["creds_file_path"],
        "properties": {
          "creds_file_path": {
            "type": "string",
            "title": "å‡­è¯æ–‡ä»¶è·¯å¾„"
          }
        }
      }
    }
  },
  
  "tags": ["oauth", "claude", "aws", "kiro"],
  "categories": ["ai-provider", "authentication"]
}
```

---

## å››ã€å„æ‰©å±•ç±»å‹è¯¦ç»†è®¾è®¡

### 4.1 Skills (AI æŠ€èƒ½åŒ…)

```rust
/// Skill æ‰©å±• trait
#[async_trait]
pub trait SkillExtension: Extension {
    /// æŠ€èƒ½è§¦å‘æ¡ä»¶
    fn triggers(&self) -> Vec<SkillTrigger>;
    
    /// ç³»ç»Ÿæç¤ºè¯
    fn system_prompt(&self) -> &str;
    
    /// å¯ç”¨å·¥å…·
    fn tools(&self) -> Vec<ToolDefinition> { vec![] }
    
    /// æ‰§è¡ŒæŠ€èƒ½
    async fn execute(&self, ctx: &SkillContext, input: &str) -> Result<SkillOutput>;
}

#[derive(Clone, Debug)]
pub enum SkillTrigger {
    Command(String),           // /review, /translate
    Keyword(Vec<String>),      // ["ä»£ç å®¡æŸ¥", "review"]
    FileType(Vec<String>),     // [".rs", ".py"]
    Always,                    // å§‹ç»ˆå¯ç”¨
}
```

**Skill extension.json ç¤ºä¾‹**ï¼š

```json
{
  "id": "code-review-skill",
  "type": "skill",
  "name": "ä»£ç å®¡æŸ¥",
  "description": "ä¸“ä¸šçš„ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œæ”¯æŒå¤šç§è¯­è¨€",
  
  "capabilities": {
    "skill": {
      "triggers": [
        { "type": "command", "value": "/review" },
        { "type": "keyword", "value": ["ä»£ç å®¡æŸ¥", "code review"] }
      ],
      "supported_languages": ["rust", "python", "typescript", "go"],
      "system_prompt_file": "prompts/system.md",
      "tools": ["read_file", "search_code"]
    }
  }
}
```

### 4.2 Token Provider (Token ä¾›åº”å•†)

```rust
/// Token ä¾›åº”å•†æ‰©å±• trait
#[async_trait]
pub trait TokenProviderExtension: Extension {
    /// æ”¯æŒçš„æ¨¡å‹åˆ—è¡¨
    async fn list_models(&self) -> Result<Vec<ModelInfo>>;
    
    /// è·å– API é…ç½®
    fn api_config(&self) -> &ApiConfig;
    
    /// éªŒè¯ API Key
    async fn validate_key(&self, key: &str) -> Result<ValidationResult>;
    
    /// è·å–ä½¿ç”¨é‡/é…é¢
    async fn get_usage(&self, key: &str) -> Result<UsageInfo>;
    
    /// ä»·æ ¼ä¿¡æ¯
    fn pricing(&self) -> Option<&PricingInfo> { None }
}

#[derive(Clone, Debug)]
pub struct ApiConfig {
    pub base_url: String,
    pub auth_header: String,      // "Authorization", "x-api-key"
    pub auth_prefix: String,      // "Bearer ", ""
    pub protocol: String,         // "openai", "anthropic"
}
```

**Token Provider extension.json ç¤ºä¾‹**ï¼š

```json
{
  "id": "openrouter-provider",
  "type": "token_provider",
  "name": "OpenRouter",
  "description": "ç»Ÿä¸€ API è®¿é—®å¤šç§ AI æ¨¡å‹",
  
  "vendor": {
    "id": "openrouter",
    "name": "OpenRouter",
    "homepage": "https://openrouter.ai",
    "verified": true
  },
  
  "capabilities": {
    "token_provider": {
      "base_url": "https://openrouter.ai/api/v1",
      "protocol": "openai",
      "auth_header": "Authorization",
      "auth_prefix": "Bearer ",
      "models_endpoint": "/models",
      "supports_streaming": true,
      "pricing_url": "https://openrouter.ai/docs#models"
    }
  }
}
```

### 4.3 OAuth Provider (OAuth å‡­è¯)

```rust
/// OAuth å‡­è¯æ‰©å±• trait (ç»§æ‰¿è‡ªç°æœ‰è®¾è®¡)
#[async_trait]
pub trait OAuthProviderExtension: Extension {
    /// ç›®æ ‡åè®®
    fn target_protocol(&self) -> &str;
    
    /// æ”¯æŒçš„è®¤è¯æ–¹å¼
    fn supported_auth_types(&self) -> Vec<AuthTypeInfo>;
    
    /// å‡­è¯é…ç½® Schema
    fn credential_schema(&self, auth_type: &str) -> serde_json::Value;
    
    /// è·å–å‡­è¯
    async fn acquire_credential(&self, model: &str) -> Result<AcquiredCredential>;
    
    /// é‡Šæ”¾å‡­è¯
    async fn release_credential(&self, id: &str, result: UsageResult);
    
    /// åˆ·æ–° Token
    async fn refresh_token(&self, id: &str) -> Result<TokenRefreshResult>;
    
    /// åè®®è½¬æ¢
    async fn transform_request(&self, req: &mut ChatRequest) -> Result<()>;
    
    /// é£æ§é€‚é…
    async fn apply_risk_control(&self, req: &mut ChatRequest, cred_id: &str) -> Result<()>;
}
```

### 4.4 Tool (å·¥å…·ç±»)

```rust
/// å·¥å…·æ‰©å±• trait
#[async_trait]
pub trait ToolExtension: Extension {
    /// å·¥å…·ç±»åˆ«
    fn category(&self) -> ToolCategory;
    
    /// å¯ç”¨å‘½ä»¤
    fn commands(&self) -> Vec<ToolCommand>;
    
    /// æ‰§è¡Œå‘½ä»¤
    async fn execute_command(&self, cmd: &str, args: serde_json::Value) -> Result<serde_json::Value>;
    
    /// æ˜¯å¦éœ€è¦åå°è¿è¡Œ
    fn requires_background(&self) -> bool { false }
}

#[derive(Clone, Debug)]
pub enum ToolCategory {
    Security,      // Machine ID, åŠ å¯†å·¥å…·
    Network,       // Browser Interceptor, ä»£ç†
    Development,   // ä»£ç æ ¼å¼åŒ–, Lint
    Utility,       // å‰ªè´´æ¿, æˆªå›¾
}

#[derive(Clone, Debug)]
pub struct ToolCommand {
    pub name: String,
    pub description: String,
    pub args_schema: serde_json::Value,
}
```

**Tool extension.json ç¤ºä¾‹**ï¼š

```json
{
  "id": "machine-id-tool",
  "type": "tool",
  "name": "Machine ID ç®¡ç†",
  "description": "ç”Ÿæˆå’Œç®¡ç† Machine IDï¼Œç”¨äºé£æ§é€‚é…",
  
  "capabilities": {
    "tool": {
      "category": "security",
      "commands": [
        {
          "name": "generate",
          "description": "ç”Ÿæˆæ–°çš„ Machine ID",
          "args": {}
        },
        {
          "name": "list",
          "description": "åˆ—å‡ºæ‰€æœ‰ Machine ID",
          "args": {}
        },
        {
          "name": "rotate",
          "description": "è½®æ¢æŒ‡å®šå‡­è¯çš„ Machine ID",
          "args": {
            "credential_id": { "type": "string", "required": true }
          }
        }
      ],
      "background_service": false
    }
  }
}
```

### 4.5 Vendor (æœåŠ¡å•†æ’ä»¶)

```rust
/// æœåŠ¡å•†æ’ä»¶ trait - èšåˆå¤šç§èƒ½åŠ›
#[async_trait]
pub trait VendorExtension: Extension {
    /// æœåŠ¡å•†æä¾›çš„å­æ‰©å±•
    fn sub_extensions(&self) -> Vec<SubExtensionInfo>;
    
    /// æœåŠ¡å•†ç‰¹æœ‰åŠŸèƒ½
    fn vendor_features(&self) -> Vec<VendorFeature>;
    
    /// å®˜æ–¹æ–‡æ¡£é“¾æ¥
    fn documentation_url(&self) -> Option<&str> { None }
    
    /// çŠ¶æ€é¡µé¢
    fn status_page_url(&self) -> Option<&str> { None }
}

#[derive(Clone, Debug)]
pub struct SubExtensionInfo {
    pub id: String,
    pub extension_type: ExtensionType,
    pub name: String,
}

#[derive(Clone, Debug)]
pub struct VendorFeature {
    pub id: String,
    pub name: String,
    pub description: String,
}
```

**Vendor extension.json ç¤ºä¾‹**ï¼š

```json
{
  "id": "anthropic-official",
  "type": "vendor",
  "name": "Anthropic å®˜æ–¹",
  "description": "Anthropic å®˜æ–¹æ‰©å±•åŒ…ï¼ŒåŒ…å« API Key å’Œ OAuth æ”¯æŒ",
  
  "vendor": {
    "id": "anthropic",
    "name": "Anthropic",
    "homepage": "https://anthropic.com",
    "verified": true,
    "logo": "https://anthropic.com/logo.png"
  },
  
  "capabilities": {
    "vendor": {
      "sub_extensions": [
        {
          "id": "claude-api",
          "type": "token_provider",
          "name": "Claude API Key"
        },
        {
          "id": "claude-oauth",
          "type": "oauth_provider", 
          "name": "Claude OAuth"
        }
      ],
      "features": [
        {
          "id": "prompt_caching",
          "name": "Prompt Caching",
          "description": "ç¼“å­˜ç³»ç»Ÿæç¤ºè¯ï¼Œé™ä½æˆæœ¬"
        },
        {
          "id": "batch_api",
          "name": "Batch API",
          "description": "æ‰¹é‡å¤„ç†è¯·æ±‚ï¼Œ50% æŠ˜æ‰£"
        }
      ],
      "documentation": "https://docs.anthropic.com",
      "status_page": "https://status.anthropic.com"
    }
  }
}
```

### 4.6 Protocol (åè®®æ‰©å±•)

```rust
/// åè®®æ‰©å±• trait
#[async_trait]
pub trait ProtocolExtension: Extension {
    /// åè®® ID
    fn protocol_id(&self) -> &str;
    
    /// æ ¼å¼åŒ–è¯·æ±‚
    fn format_request(&self, req: &ChatRequest) -> Result<serde_json::Value>;
    
    /// è§£æå“åº”
    fn parse_response(&self, resp: &serde_json::Value) -> Result<ChatResponse>;
    
    /// è§£ææµå¼å“åº”
    fn parse_stream_chunk(&self, chunk: &[u8]) -> Result<Option<ChatChunk>>;
    
    /// é”™è¯¯è§£æ
    fn parse_error(&self, status: u16, body: &str) -> ProviderError;
}
```

**Protocol extension.json ç¤ºä¾‹**ï¼š

```json
{
  "id": "doubao-protocol",
  "type": "protocol",
  "name": "è±†åŒ…åè®®",
  "description": "å­—èŠ‚è·³åŠ¨è±†åŒ… API åè®®æ”¯æŒ",
  
  "capabilities": {
    "protocol": {
      "protocol_id": "doubao",
      "base_compatible": "openai",
      "differences": [
        "model å­—æ®µæ ¼å¼ä¸åŒ",
        "æµå¼å“åº”æ ¼å¼ç•¥æœ‰å·®å¼‚"
      ],
      "documentation": "https://www.volcengine.com/docs/82379"
    }
  }
}
```

---

## äº”ã€æ‰©å±•ä¸­å¿ƒ UI è®¾è®¡

### 5.1 ç»Ÿä¸€å…¥å£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ‰©å±•ä¸­å¿ƒ (Extension Center)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ” æœç´¢æ‰©å±•...                              [+ å®‰è£…æ‰©å±•] [âš™ï¸]  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  å…¨éƒ¨   â”‚ Skills  â”‚ Token   â”‚ OAuth   â”‚  å·¥å…·   â”‚ æœåŠ¡å•†  â”‚         â”‚
â”‚  â”‚  (23)   â”‚  (5)    â”‚  (8)    â”‚  (4)    â”‚  (3)    â”‚  (3)    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        å·²å®‰è£…æ‰©å±•                                â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ”Œ Kiro Provider                           v1.2.0       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ OAuth å‡­è¯ Â· ProxyCast Team                             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ AWS CodeWhisperer OAuth å‡­è¯ç®¡ç†                        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ [â— å·²å¯ç”¨]  [é…ç½®]  [æ›´æ–°å¯ç”¨ â†‘]  [å¸è½½]                â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ› ï¸ Machine ID Tool                         v0.3.0       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ å·¥å…· Â· ProxyCast Team                                   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ Machine ID ç”Ÿæˆå’Œç®¡ç†å·¥å…·                               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ [â— å·²å¯ç”¨]  [æ‰“å¼€]  [é…ç½®]  [å¸è½½]                      â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ âœ¨ ä»£ç å®¡æŸ¥ Skill                          v2.0.0       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ Skill Â· Community                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ ä¸“ä¸šçš„ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œæ”¯æŒå¤šç§è¯­è¨€                        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ [â—‹ å·²ç¦ç”¨]  [å¯ç”¨]  [é…ç½®]  [å¸è½½]                      â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        æ‰©å±•å¸‚åœº                                  â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  ğŸ”¥ çƒ­é—¨æ‰©å±•                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚    â”‚
â”‚  â”‚  â”‚OpenRouterâ”‚ â”‚Anthropic â”‚ â”‚ Browser  â”‚ â”‚  ç¿»è¯‘    â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ Provider â”‚ â”‚  å®˜æ–¹    â”‚ â”‚Intercept â”‚ â”‚  Skill   â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ â­ 4.8   â”‚ â”‚ â­ 4.9   â”‚ â”‚ â­ 4.5   â”‚ â”‚ â­ 4.7   â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ [å®‰è£…]   â”‚ â”‚ [å®‰è£…]   â”‚ â”‚ [å®‰è£…]   â”‚ â”‚ [å®‰è£…]   â”‚            â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  ğŸ“¦ å®˜æ–¹è®¤è¯                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚    â”‚
â”‚  â”‚  â”‚  Google  â”‚ â”‚  OpenAI  â”‚ â”‚  é˜¿é‡Œäº‘  â”‚                         â”‚    â”‚
â”‚  â”‚  â”‚  å®˜æ–¹    â”‚ â”‚  å®˜æ–¹    â”‚ â”‚  é€šä¹‰    â”‚                         â”‚    â”‚
â”‚  â”‚  â”‚ âœ“ è®¤è¯   â”‚ â”‚ âœ“ è®¤è¯   â”‚ â”‚ âœ“ è®¤è¯   â”‚                         â”‚    â”‚
â”‚  â”‚  â”‚ [å®‰è£…]   â”‚ â”‚ [å®‰è£…]   â”‚ â”‚ [å®‰è£…]   â”‚                         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ‰©å±•è¯¦æƒ…é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  ğŸ”Œ Kiro Provider                                                â”‚    â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  ç‰ˆæœ¬: 1.2.0                    ç±»å‹: OAuth å‡­è¯                 â”‚    â”‚
â”‚  â”‚  ä½œè€…: ProxyCast Team           è®¸å¯: MIT                        â”‚    â”‚
â”‚  â”‚  ä¸‹è½½: 12.5k                    è¯„åˆ†: â­â­â­â­â­ (4.9)            â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  [å®‰è£…] [GitHub] [æ–‡æ¡£] [é—®é¢˜åé¦ˆ]                               â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ æè¿°                                                         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  AWS CodeWhisperer OAuth å‡­è¯ç®¡ç†æ’ä»¶ï¼Œæ”¯æŒï¼š                    â”‚    â”‚
â”‚  â”‚  - Claude å…¨ç³»åˆ—æ¨¡å‹ (Opus, Sonnet, Haiku)                       â”‚    â”‚
â”‚  â”‚  - è‡ªåŠ¨ Token åˆ·æ–°                                               â”‚    â”‚
â”‚  â”‚  - Machine ID é£æ§é€‚é…                                           â”‚    â”‚
â”‚  â”‚  - å¤šå‡­è¯è´Ÿè½½å‡è¡¡                                                â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ” æ‰€éœ€æƒé™                                                     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  âœ“ database:read     - è¯»å–æ•°æ®åº“                               â”‚    â”‚
â”‚  â”‚  âœ“ database:write    - å†™å…¥æ•°æ®åº“                               â”‚    â”‚
â”‚  â”‚  âœ“ http:request      - å‘é€ HTTP è¯·æ±‚                           â”‚    â”‚
â”‚  â”‚  âœ“ crypto:encrypt    - åŠ å¯†æ•æ„Ÿæ•°æ®                             â”‚    â”‚
â”‚  â”‚  âœ“ fs:read:credentials - è¯»å–å‡­è¯æ–‡ä»¶                           â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“Š æ›´æ–°æ—¥å¿—                                                     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  v1.2.0 (2026-01-05)                                             â”‚    â”‚
â”‚  â”‚  - æ–°å¢ Machine ID è‡ªåŠ¨è½®æ¢                                      â”‚    â”‚
â”‚  â”‚  - ä¿®å¤ Token åˆ·æ–°å¤±è´¥é—®é¢˜                                       â”‚    â”‚
â”‚  â”‚  - ä¼˜åŒ–å‡­è¯å¥åº·æ£€æŸ¥é€»è¾‘                                          â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  v1.1.0 (2025-12-20)                                             â”‚    â”‚
â”‚  â”‚  - æ”¯æŒ Claude 3.5 Sonnet                                        â”‚    â”‚
â”‚  â”‚  - æ–°å¢å‡­è¯å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½                                         â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 æ‰©å±•é…ç½®é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kiro Provider é…ç½®                                          [ä¿å­˜] [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  åŸºç¡€è®¾ç½®                                                        â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  å¯ç”¨çŠ¶æ€:  [âœ“] å¯ç”¨                                             â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  è¯·æ±‚è¶…æ—¶:  [30000] ms                                           â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  é£æ§è®¾ç½®                                                        â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  Machine ID è½®æ¢:  [âœ“] å¯ç”¨                                      â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  ç‰ˆæœ¬å·ä¼ªè£…:       [âœ“] å¯ç”¨                                      â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  å†·å´æœŸ (ç§’):      [300]                                         â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  å‡­è¯ç®¡ç†                                                        â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  å·²æ·»åŠ å‡­è¯: 3                                                   â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ å‡­è¯ 1 (account1@example.com)          â— å¥åº·  [åˆ é™¤]  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ å‡­è¯ 2 (account2@example.com)          â— å¥åº·  [åˆ é™¤]  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ å‡­è¯ 3 (account3@example.com)          â—‹ å†·å´  [åˆ é™¤]  â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  [+ æ·»åŠ å‡­è¯]                                                    â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€æ‰©å±•æ³¨å†Œè¡¨ä¸åŠ è½½å™¨

### 6.1 ç»Ÿä¸€æ³¨å†Œè¡¨

```rust
/// ç»Ÿä¸€æ‰©å±•æ³¨å†Œè¡¨
pub struct ExtensionRegistry {
    /// æ‰€æœ‰å·²åŠ è½½æ‰©å±•
    extensions: HashMap<String, Arc<dyn Extension>>,
    
    /// æŒ‰ç±»å‹ç´¢å¼•
    type_index: HashMap<ExtensionType, Vec<String>>,
    
    /// æŒ‰æœåŠ¡å•†ç´¢å¼•
    vendor_index: HashMap<String, Vec<String>>,
    
    /// æ‰©å±•ç›®å½•
    extensions_dir: PathBuf,
    
    /// äº‹ä»¶å‘é€å™¨
    event_tx: broadcast::Sender<ExtensionEvent>,
}

impl ExtensionRegistry {
    /// åˆ›å»ºæ³¨å†Œè¡¨
    pub fn new(extensions_dir: PathBuf) -> Self;
    
    /// åŠ è½½æ‰€æœ‰æ‰©å±•
    pub async fn load_all(&mut self) -> Result<()>;
    
    /// å®‰è£…æ‰©å±•
    pub async fn install(&mut self, source: ExtensionSource) -> Result<String>;
    
    /// å¸è½½æ‰©å±•
    pub async fn uninstall(&mut self, id: &str) -> Result<()>;
    
    /// å¯ç”¨/ç¦ç”¨æ‰©å±•
    pub async fn set_enabled(&mut self, id: &str, enabled: bool) -> Result<()>;
    
    /// è·å–æ‰©å±•
    pub fn get(&self, id: &str) -> Option<Arc<dyn Extension>>;
    
    /// æŒ‰ç±»å‹è·å–
    pub fn get_by_type(&self, ext_type: ExtensionType) -> Vec<Arc<dyn Extension>>;
    
    /// æŒ‰æœåŠ¡å•†è·å–
    pub fn get_by_vendor(&self, vendor_id: &str) -> Vec<Arc<dyn Extension>>;
    
    /// æ£€æŸ¥æ›´æ–°
    pub async fn check_updates(&self) -> Result<Vec<ExtensionUpdate>>;
    
    /// æ›´æ–°æ‰©å±•
    pub async fn update(&mut self, id: &str) -> Result<()>;
    
    /// è®¢é˜…äº‹ä»¶
    pub fn subscribe(&self) -> broadcast::Receiver<ExtensionEvent>;
}

/// æ‰©å±•æ¥æº
pub enum ExtensionSource {
    /// ä» GitHub Release
    GitHub { owner: String, repo: String, version: Option<String> },
    /// ä»æœ¬åœ°æ–‡ä»¶
    LocalFile(PathBuf),
    /// ä» URL
    Url(String),
    /// ä»æ‰©å±•å¸‚åœº
    Marketplace { id: String, version: Option<String> },
}

/// æ‰©å±•äº‹ä»¶
pub enum ExtensionEvent {
    Installed { id: String },
    Uninstalled { id: String },
    Enabled { id: String },
    Disabled { id: String },
    Updated { id: String, from: String, to: String },
    Error { id: String, error: String },
}
```

### 6.2 æ‰©å±•åŠ è½½å™¨

```rust
/// æ‰©å±•åŠ è½½å™¨
pub struct ExtensionLoader {
    extensions_dir: PathBuf,
    sdk: Arc<ProxyCastSDK>,
}

impl ExtensionLoader {
    /// åŠ è½½å•ä¸ªæ‰©å±•
    pub async fn load(&self, ext_dir: &Path) -> Result<Box<dyn Extension>> {
        // 1. è¯»å– extension.json
        let manifest_path = ext_dir.join("extension.json");
        let manifest: ExtensionManifest = serde_json::from_str(
            &fs::read_to_string(&manifest_path)?
        )?;
        
        // 2. éªŒè¯ç­¾åï¼ˆå¦‚æœæœ‰ï¼‰
        if let Some(signature) = &manifest.signature {
            self.verify_signature(ext_dir, signature)?;
        }
        
        // 3. æ ¹æ®ç±»å‹åˆ›å»ºæ‰©å±•å®ä¾‹
        let extension: Box<dyn Extension> = match manifest.extension_type {
            ExtensionType::Skill => {
                Box::new(SkillExtensionImpl::new(ext_dir, manifest, self.sdk.clone())?)
            }
            ExtensionType::TokenProvider => {
                Box::new(TokenProviderImpl::new(ext_dir, manifest, self.sdk.clone())?)
            }
            ExtensionType::OAuthProvider => {
                Box::new(OAuthProviderImpl::new(ext_dir, manifest, self.sdk.clone())?)
            }
            ExtensionType::Tool => {
                Box::new(ToolExtensionImpl::new(ext_dir, manifest, self.sdk.clone())?)
            }
            ExtensionType::Vendor => {
                Box::new(VendorExtensionImpl::new(ext_dir, manifest, self.sdk.clone())?)
            }
            ExtensionType::Protocol => {
                Box::new(ProtocolExtensionImpl::new(ext_dir, manifest, self.sdk.clone())?)
            }
            ExtensionType::Theme => {
                Box::new(ThemeExtensionImpl::new(ext_dir, manifest)?)
            }
        };
        
        Ok(extension)
    }
    
    /// éªŒè¯ç­¾å
    fn verify_signature(&self, ext_dir: &Path, signature: &str) -> Result<()>;
}
```

### 6.3 ProxyCast SDK

```rust
/// ProxyCast SDK - ä¾›æ‰©å±•ä½¿ç”¨çš„èƒ½åŠ›é›†
pub struct ProxyCastSDK {
    database: Arc<DatabaseService>,
    http: Arc<HttpClient>,
    crypto: Arc<CryptoService>,
    notification: Arc<NotificationService>,
    events: Arc<EventBus>,
    storage: Arc<StorageService>,
}

impl ProxyCastSDK {
    // ========== æ•°æ®åº“ ==========
    
    /// æŸ¥è¯¢æ•°æ®
    pub async fn db_query<T: DeserializeOwned>(&self, sql: &str, params: &[&dyn ToSql]) -> Result<Vec<T>>;
    
    /// æ‰§è¡Œ SQL
    pub async fn db_execute(&self, sql: &str, params: &[&dyn ToSql]) -> Result<usize>;
    
    // ========== HTTP ==========
    
    /// å‘é€è¯·æ±‚
    pub async fn http_request(&self, req: HttpRequest) -> Result<HttpResponse>;
    
    // ========== åŠ å¯† ==========
    
    /// åŠ å¯†æ•°æ®
    pub fn encrypt(&self, data: &str) -> Result<String>;
    
    /// è§£å¯†æ•°æ®
    pub fn decrypt(&self, data: &str) -> Result<String>;
    
    // ========== é€šçŸ¥ ==========
    
    /// æ˜¾ç¤ºé€šçŸ¥
    pub fn notify(&self, notification: Notification);
    
    // ========== äº‹ä»¶ ==========
    
    /// å‘é€äº‹ä»¶
    pub fn emit(&self, event: &str, data: serde_json::Value);
    
    /// è®¢é˜…äº‹ä»¶
    pub fn on(&self, event: &str, callback: Box<dyn Fn(serde_json::Value) + Send + Sync>);
    
    // ========== å­˜å‚¨ ==========
    
    /// è·å–æ‰©å±•ä¸“å±å­˜å‚¨
    pub fn storage(&self, extension_id: &str) -> ExtensionStorage;
}

/// æ‰©å±•ä¸“å±å­˜å‚¨
pub struct ExtensionStorage {
    extension_id: String,
    base_path: PathBuf,
}

impl ExtensionStorage {
    /// è¯»å–é…ç½®
    pub fn get_config(&self) -> Result<serde_json::Value>;
    
    /// ä¿å­˜é…ç½®
    pub fn set_config(&self, config: serde_json::Value) -> Result<()>;
    
    /// è¯»å–æ–‡ä»¶
    pub fn read_file(&self, path: &str) -> Result<Vec<u8>>;
    
    /// å†™å…¥æ–‡ä»¶
    pub fn write_file(&self, path: &str, data: &[u8]) -> Result<()>;
}
```

---

## ä¸ƒã€æ‰©å±•å¸‚åœº

### 7.1 å¸‚åœºæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ‰©å±•å¸‚åœº (Extension Marketplace)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    å¸‚åœº API (marketplace.proxycast.dev)          â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  GET  /api/extensions              - æ‰©å±•åˆ—è¡¨                    â”‚    â”‚
â”‚  â”‚  GET  /api/extensions/:id          - æ‰©å±•è¯¦æƒ…                    â”‚    â”‚
â”‚  â”‚  GET  /api/extensions/:id/versions - ç‰ˆæœ¬åˆ—è¡¨                    â”‚    â”‚
â”‚  â”‚  GET  /api/extensions/:id/download - ä¸‹è½½æ‰©å±•                    â”‚    â”‚
â”‚  â”‚  POST /api/extensions              - å‘å¸ƒæ‰©å±• (éœ€è®¤è¯)           â”‚    â”‚
â”‚  â”‚  GET  /api/vendors                 - æœåŠ¡å•†åˆ—è¡¨                  â”‚    â”‚
â”‚  â”‚  GET  /api/categories              - åˆ†ç±»åˆ—è¡¨                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    æ‰©å±•ç´¢å¼• (Extension Index)                    â”‚    â”‚
â”‚  â”‚                                                                   â”‚    â”‚
â”‚  â”‚  {                                                                â”‚    â”‚
â”‚  â”‚    "id": "kiro-provider",                                        â”‚    â”‚
â”‚  â”‚    "name": "Kiro Provider",                                      â”‚    â”‚
â”‚  â”‚    "type": "oauth_provider",                                     â”‚    â”‚
â”‚  â”‚    "vendor": { "id": "proxycast", "verified": true },            â”‚    â”‚
â”‚  â”‚    "latest_version": "1.2.0",                                    â”‚    â”‚
â”‚  â”‚    "downloads": 12500,                                           â”‚    â”‚
â”‚  â”‚    "rating": 4.9,                                                â”‚    â”‚
â”‚  â”‚    "tags": ["oauth", "claude", "aws"],                           â”‚    â”‚
â”‚  â”‚    "download_url": "https://..."                                 â”‚    â”‚
â”‚  â”‚  }                                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 å‘å¸ƒæµç¨‹

```
å¼€å‘è€…æäº¤æ‰©å±•
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è‡ªåŠ¨åŒ–æ£€æŸ¥                       â”‚
â”‚     - extension.json æ ¼å¼éªŒè¯        â”‚
â”‚     - æƒé™å£°æ˜å®¡æ ¸                   â”‚
â”‚     - å®‰å…¨æ‰«æ                       â”‚
â”‚     - äºŒè¿›åˆ¶ç­¾åéªŒè¯                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. äººå·¥å®¡æ ¸ (å¯é€‰)                  â”‚
â”‚     - å®˜æ–¹è®¤è¯æ‰©å±•éœ€è¦               â”‚
â”‚     - é«˜æƒé™æ‰©å±•éœ€è¦                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. å‘å¸ƒåˆ°å¸‚åœº                       â”‚
â”‚     - ç”Ÿæˆä¸‹è½½é“¾æ¥                   â”‚
â”‚     - æ›´æ–°ç´¢å¼•                       â”‚
â”‚     - é€šçŸ¥è®¢é˜…ç”¨æˆ·                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…«ã€æƒé™ç³»ç»Ÿ

### 8.1 æƒé™å®šä¹‰

```rust
/// æ‰©å±•æƒé™
#[derive(Clone, Debug, PartialEq, Eq, Hash, Serialize, Deserialize)]
pub enum Permission {
    // æ•°æ®åº“
    DatabaseRead,
    DatabaseWrite,
    
    // ç½‘ç»œ
    HttpRequest,
    HttpRequestExternal,  // è®¿é—®å¤–éƒ¨ URL
    
    // æ–‡ä»¶ç³»ç»Ÿ
    FsReadCredentials,    // è¯»å–å‡­è¯æ–‡ä»¶
    FsReadConfig,         // è¯»å–é…ç½®æ–‡ä»¶
    FsWriteConfig,        // å†™å…¥é…ç½®æ–‡ä»¶
    FsReadAny,            // è¯»å–ä»»æ„æ–‡ä»¶ (é«˜å±)
    FsWriteAny,           // å†™å…¥ä»»æ„æ–‡ä»¶ (é«˜å±)
    
    // åŠ å¯†
    CryptoEncrypt,
    CryptoDecrypt,
    
    // ç³»ç»Ÿ
    SystemInfo,           // è·å–ç³»ç»Ÿä¿¡æ¯
    ProcessSpawn,         // å¯åŠ¨å­è¿›ç¨‹ (é«˜å±)
    
    // UI
    UiNotification,
    UiDialog,
    UiMainWindow,
    
    // æ‰©å±•é—´é€šä¿¡
    ExtensionCommunicate,
}

impl Permission {
    /// æ˜¯å¦ä¸ºé«˜å±æƒé™
    pub fn is_dangerous(&self) -> bool {
        matches!(self, 
            Permission::FsReadAny | 
            Permission::FsWriteAny | 
            Permission::ProcessSpawn |
            Permission::HttpRequestExternal
        )
    }
    
    /// æƒé™æè¿°
    pub fn description(&self) -> &str {
        match self {
            Permission::DatabaseRead => "è¯»å–æ•°æ®åº“",
            Permission::DatabaseWrite => "å†™å…¥æ•°æ®åº“",
            Permission::HttpRequest => "å‘é€ HTTP è¯·æ±‚åˆ° ProxyCast æœåŠ¡",
            Permission::HttpRequestExternal => "å‘é€ HTTP è¯·æ±‚åˆ°å¤–éƒ¨æœåŠ¡",
            Permission::FsReadCredentials => "è¯»å–å‡­è¯æ–‡ä»¶",
            Permission::CryptoEncrypt => "åŠ å¯†æ•æ„Ÿæ•°æ®",
            Permission::CryptoDecrypt => "è§£å¯†æ•æ„Ÿæ•°æ®",
            // ...
            _ => "æœªçŸ¥æƒé™"
        }
    }
}
```

### 8.2 æƒé™æ£€æŸ¥

```rust
/// æƒé™æ£€æŸ¥å™¨
pub struct PermissionChecker {
    granted: HashSet<Permission>,
}

impl PermissionChecker {
    /// æ£€æŸ¥æƒé™
    pub fn check(&self, permission: Permission) -> Result<()> {
        if self.granted.contains(&permission) {
            Ok(())
        } else {
            Err(Error::PermissionDenied(permission))
        }
    }
    
    /// è¯·æ±‚æƒé™ (å¼¹çª—ç¡®è®¤)
    pub async fn request(&mut self, permissions: Vec<Permission>) -> Result<()>;
}
```

---

## ä¹ã€ç›®å½•ç»“æ„

### 9.1 ProxyCast ä¸»é¡¹ç›®ç»“æ„

```
src-tauri/src/
â”œâ”€â”€ extension/                    # ã€æ–°å¢ã€‘ç»Ÿä¸€æ‰©å±•ç³»ç»Ÿ
â”‚   â”œâ”€â”€ mod.rs                    # æ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ types.rs                  # Extension trait å’Œç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ registry.rs               # ExtensionRegistry ç»Ÿä¸€æ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ loader.rs                 # ExtensionLoader åŠ è½½å™¨
â”‚   â”œâ”€â”€ host.rs                   # ExtensionHost å®¿ä¸»ç¯å¢ƒ
â”‚   â”œâ”€â”€ sdk.rs                    # ProxyCastSDK
â”‚   â”œâ”€â”€ permission.rs             # æƒé™ç³»ç»Ÿ
â”‚   â”‚
â”‚   â”œâ”€â”€ impls/                    # å„ç±»å‹æ‰©å±•å®ç°
â”‚   â”‚   â”œâ”€â”€ skill.rs              # SkillExtension å®ç°
â”‚   â”‚   â”œâ”€â”€ token_provider.rs     # TokenProviderExtension å®ç°
â”‚   â”‚   â”œâ”€â”€ oauth_provider.rs     # OAuthProviderExtension å®ç°
â”‚   â”‚   â”œâ”€â”€ tool.rs               # ToolExtension å®ç°
â”‚   â”‚   â”œâ”€â”€ vendor.rs             # VendorExtension å®ç°
â”‚   â”‚   â”œâ”€â”€ protocol.rs           # ProtocolExtension å®ç°
â”‚   â”‚   â””â”€â”€ theme.rs              # ThemeExtension å®ç°
â”‚   â”‚
â”‚   â””â”€â”€ marketplace/              # æ‰©å±•å¸‚åœºå®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ client.rs             # API å®¢æˆ·ç«¯
â”‚       â””â”€â”€ types.rs              # å¸‚åœºæ•°æ®ç±»å‹
â”‚
â”œâ”€â”€ credential/                   # ä¿ç•™ï¼Œä¾› OAuth Provider æ‰©å±•å¤ç”¨
â”‚   â”œâ”€â”€ pool.rs
â”‚   â”œâ”€â”€ balancer.rs
â”‚   â””â”€â”€ health.rs
â”‚
â””â”€â”€ plugin/                       # ç°æœ‰æ’ä»¶ç³»ç»Ÿï¼Œé€æ­¥è¿ç§»åˆ° extension/
```

### 9.2 å‰ç«¯ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ ExtensionCenter/          # ã€æ–°å¢ã€‘æ‰©å±•ä¸­å¿ƒé¡µé¢
â”‚       â”œâ”€â”€ index.tsx             # ä¸»é¡µé¢
â”‚       â”œâ”€â”€ ExtensionList.tsx     # æ‰©å±•åˆ—è¡¨
â”‚       â”œâ”€â”€ ExtensionDetail.tsx   # æ‰©å±•è¯¦æƒ…
â”‚       â”œâ”€â”€ ExtensionConfig.tsx   # æ‰©å±•é…ç½®
â”‚       â”œâ”€â”€ Marketplace.tsx       # æ‰©å±•å¸‚åœº
â”‚       â””â”€â”€ components/
â”‚           â”œâ”€â”€ ExtensionCard.tsx
â”‚           â”œâ”€â”€ TypeFilter.tsx
â”‚           â”œâ”€â”€ VendorBadge.tsx
â”‚           â””â”€â”€ PermissionList.tsx
â”‚
â”œâ”€â”€ components/
â”‚   â””â”€â”€ extension/                # ã€æ–°å¢ã€‘æ‰©å±•ç›¸å…³ç»„ä»¶
â”‚       â”œâ”€â”€ ExtensionContainer.tsx  # æ‰©å±• UI å®¹å™¨
â”‚       â”œâ”€â”€ ExtensionLoader.tsx     # æ‰©å±• JS/CSS åŠ è½½
â”‚       â””â”€â”€ ExtensionRegistry.tsx   # å‰ç«¯æ‰©å±•æ³¨å†Œè¡¨
â”‚
â””â”€â”€ hooks/
    â””â”€â”€ useExtension.ts           # ã€æ–°å¢ã€‘æ‰©å±•ç›¸å…³ hooks
```

### 9.3 æ‰©å±•å®‰è£…ç›®å½•

```
~/.proxycast/extensions/
â”œâ”€â”€ kiro-provider/                # OAuth Provider æ‰©å±•
â”‚   â”œâ”€â”€ extension.json
â”‚   â”œâ”€â”€ config.json
â”‚   â”œâ”€â”€ bin/
â”‚   â”‚   â””â”€â”€ kiro-provider-cli
â”‚   â””â”€â”€ dist/
â”‚       â”œâ”€â”€ index.js
â”‚       â””â”€â”€ styles.css
â”‚
â”œâ”€â”€ machine-id-tool/              # Tool æ‰©å±•
â”‚   â”œâ”€â”€ extension.json
â”‚   â”œâ”€â”€ config.json
â”‚   â””â”€â”€ bin/
â”‚       â””â”€â”€ machine-id-tool
â”‚
â”œâ”€â”€ code-review-skill/            # Skill æ‰©å±•
â”‚   â”œâ”€â”€ extension.json
â”‚   â”œâ”€â”€ config.json
â”‚   â””â”€â”€ prompts/
â”‚       â””â”€â”€ system.md
â”‚
â”œâ”€â”€ openrouter-provider/          # Token Provider æ‰©å±•
â”‚   â”œâ”€â”€ extension.json
â”‚   â””â”€â”€ config.json
â”‚
â””â”€â”€ anthropic-official/           # Vendor æ‰©å±•
    â”œâ”€â”€ extension.json
    â”œâ”€â”€ config.json
    â””â”€â”€ sub_extensions/
        â”œâ”€â”€ claude-api/
        â””â”€â”€ claude-oauth/
```

---

## åã€æ•°æ®åº“è®¾è®¡

### 10.1 æ‰©å±•è¡¨

```sql
-- å·²å®‰è£…æ‰©å±•
CREATE TABLE extensions (
    id TEXT PRIMARY KEY,              -- "kiro-provider"
    type TEXT NOT NULL,               -- "oauth_provider", "skill", etc.
    name TEXT NOT NULL,
    version TEXT NOT NULL,
    vendor_id TEXT,
    enabled INTEGER DEFAULT 1,
    config TEXT,                      -- JSON é…ç½®
    permissions TEXT,                 -- JSON æƒé™åˆ—è¡¨
    install_path TEXT NOT NULL,
    installed_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL
);

-- æ‰©å±•å‡­è¯ (OAuth Provider ä¸“ç”¨)
CREATE TABLE extension_credentials (
    id TEXT PRIMARY KEY,
    extension_id TEXT NOT NULL,
    credential_data TEXT NOT NULL,    -- åŠ å¯†çš„å‡­è¯æ•°æ®
    status TEXT DEFAULT 'active',
    stats TEXT,                       -- JSON ç»Ÿè®¡
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL,
    FOREIGN KEY (extension_id) REFERENCES extensions(id)
);

-- æœåŠ¡å•†ä¿¡æ¯
CREATE TABLE vendors (
    id TEXT PRIMARY KEY,              -- "anthropic", "openai"
    name TEXT NOT NULL,
    homepage TEXT,
    verified INTEGER DEFAULT 0,
    logo_url TEXT,
    created_at INTEGER NOT NULL
);

-- æ‰©å±•å¸‚åœºç¼“å­˜
CREATE TABLE marketplace_cache (
    id TEXT PRIMARY KEY,
    data TEXT NOT NULL,               -- JSON æ‰©å±•ä¿¡æ¯
    cached_at INTEGER NOT NULL
);
```

---

## åä¸€ã€è¿ç§»è®¡åˆ’

### 11.1 é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„ (2 å‘¨)

| ä»»åŠ¡ | è¯´æ˜ |
|------|------|
| Extension trait å®šä¹‰ | ç»Ÿä¸€æ‰©å±•æ¥å£ |
| ExtensionRegistry | ç»Ÿä¸€æ³¨å†Œè¡¨ |
| ExtensionLoader | æ‰©å±•åŠ è½½å™¨ |
| ProxyCastSDK | æ‰©å±• SDK |
| æƒé™ç³»ç»Ÿ | Permission å®šä¹‰å’Œæ£€æŸ¥ |

### 11.2 é˜¶æ®µäºŒï¼šæ‰©å±•ç±»å‹å®ç° (3 å‘¨)

| ä»»åŠ¡ | è¯´æ˜ |
|------|------|
| OAuthProviderExtension | è¿ç§»ç°æœ‰ OAuth Provider |
| TokenProviderExtension | è¿ç§»ç°æœ‰ API Key Provider |
| ToolExtension | è¿ç§» MachineIdTool |
| SkillExtension | è¿ç§»ç°æœ‰ Skills |

### 11.3 é˜¶æ®µä¸‰ï¼šUI ä¸å¸‚åœº (2 å‘¨)

| ä»»åŠ¡ | è¯´æ˜ |
|------|------|
| æ‰©å±•ä¸­å¿ƒé¡µé¢ | ç»Ÿä¸€ç®¡ç†å…¥å£ |
| æ‰©å±•é…ç½®é¢æ¿ | åŠ¨æ€è¡¨å•ç”Ÿæˆ |
| æ‰©å±•å¸‚åœºå®¢æˆ·ç«¯ | æµè§ˆã€å®‰è£…ã€æ›´æ–° |

### 11.4 é˜¶æ®µå››ï¼šç”Ÿæ€å»ºè®¾ (æŒç»­)

| ä»»åŠ¡ | è¯´æ˜ |
|------|------|
| å®˜æ–¹æ‰©å±•å‘å¸ƒ | Kiroã€Anthropicã€OpenAI ç­‰ |
| å¼€å‘è€…æ–‡æ¡£ | æ‰©å±•å¼€å‘æŒ‡å— |
| å¸‚åœºåç«¯ | marketplace.proxycast.dev |

---

## åäºŒã€ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»

### 12.1 å…¼å®¹æ€§è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ç°æœ‰ç³»ç»Ÿ â†’ ç»Ÿä¸€æ‰©å±•å¹³å°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ç°æœ‰ ProviderType æšä¸¾ (11ç§)                                           â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â”œâ”€â”€ OAuth ç±»å‹ (7ç§) â”€â”€â”€â”€â”€â”€â†’ OAuthProviderExtension               â”‚
â”‚       â”‚   Kiro, Gemini, Qwen, Antigravity,                              â”‚
â”‚       â”‚   ClaudeOAuth, Codex, IFlow                                     â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â””â”€â”€ API Key ç±»å‹ (4ç§) â”€â”€â”€â”€â†’ TokenProviderExtension               â”‚
â”‚           Claude, OpenAI, GeminiApiKey, Vertex                          â”‚
â”‚                                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                          â”‚
â”‚  ç°æœ‰ api_key_providers è¡¨ (60+ é¢„è®¾)                                    â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â””â”€â”€ ä¿æŒä¸å˜ï¼Œä½œä¸º TokenProviderExtension çš„æ•°æ®æº                 â”‚
â”‚                                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                          â”‚
â”‚  ç°æœ‰ Plugin ç³»ç»Ÿ (MachineIdTool)                                        â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â””â”€â”€ è¿ç§»ä¸º ToolExtension                                          â”‚
â”‚                                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                          â”‚
â”‚  ç°æœ‰ Skills ç³»ç»Ÿ                                                        â”‚
â”‚       â”‚                                                                  â”‚
â”‚       â””â”€â”€ è¿ç§»ä¸º SkillExtension                                         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 æ¸è¿›å¼è¿ç§»

1. **ç¬¬ä¸€æ­¥**ï¼šæ–°å»º `extension/` æ¨¡å—ï¼Œä¸å½±å“ç°æœ‰ä»£ç 
2. **ç¬¬äºŒæ­¥**ï¼šå®ç°å„ç±»å‹ Extension trait
3. **ç¬¬ä¸‰æ­¥**ï¼šå°†ç°æœ‰ Provider åŒ…è£…ä¸º Extension
4. **ç¬¬å››æ­¥**ï¼šæ–°åŠŸèƒ½ä½¿ç”¨ Extension ç³»ç»Ÿ
5. **ç¬¬äº”æ­¥**ï¼šé€æ­¥åˆ é™¤æ—§ä»£ç 

---

## åä¸‰ã€æ€»ç»“

### 13.1 æ ¸å¿ƒä»·å€¼

| ä»·å€¼ | è¯´æ˜ |
|------|------|
| **ç»Ÿä¸€ç®¡ç†** | ä¸€ä¸ªå…¥å£ç®¡ç†æ‰€æœ‰æ‰©å±•ç±»å‹ |
| **ç‹¬ç«‹æ›´æ–°** | æ‰©å±•å¯ç‹¬ç«‹å®‰è£…ã€æ›´æ–°ã€å¸è½½ |
| **å¼€æ”¾ç”Ÿæ€** | ç¬¬ä¸‰æ–¹å¼€å‘è€…å¯è´¡çŒ®æ‰©å±• |
| **æœåŠ¡å•†å‹å¥½** | æœåŠ¡å•†å¯å‘å¸ƒå®˜æ–¹æ‰©å±• |
| **å®‰å…¨å¯æ§** | æƒé™ç³»ç»Ÿä¿éšœå®‰å…¨ |

### 13.2 æ‰©å±•ç±»å‹æ€»ç»“

| ç±»å‹ | æ•°é‡ | ç¤ºä¾‹ |
|------|------|------|
| Skills | 5+ | ä»£ç å®¡æŸ¥ã€ç¿»è¯‘ã€å†™ä½œ |
| Token Provider | 10+ | OpenRouterã€TogetherAIã€å®˜æ–¹ API |
| OAuth Provider | 7+ | Kiroã€Claude OAuthã€Gemini |
| Tool | 3+ | Machine IDã€Browser Interceptor |
| Vendor | 5+ | Anthropicã€OpenAIã€Google |
| Protocol | 3+ | Doubaoã€Wenxin |
| Theme | 2+ | Dark Proã€Light Minimal |

### 13.3 å…³é”®è®¾è®¡å†³ç­–

1. **ç»Ÿä¸€ Extension trait**ï¼šæ‰€æœ‰æ‰©å±•ç±»å‹ç»§æ‰¿åŒä¸€åŸºç¡€æ¥å£
2. **extension.json æ¸…å•**ï¼šæ ‡å‡†åŒ–æ‰©å±•å…ƒæ•°æ®æ ¼å¼
3. **ProxyCastSDK**ï¼šä¸ºæ‰©å±•æä¾›ç»Ÿä¸€çš„èƒ½åŠ›è®¿é—®
4. **æƒé™ç³»ç»Ÿ**ï¼šç»†ç²’åº¦æƒé™æ§åˆ¶ï¼Œä¿éšœå®‰å…¨
5. **æ‰©å±•å¸‚åœº**ï¼šå®˜æ–¹å¸‚åœº + GitHub Release åŒæ¸ é“
6. **æ¸è¿›å¼è¿ç§»**ï¼šä¸ç ´åç°æœ‰åŠŸèƒ½ï¼Œé€æ­¥æ¼”è¿›
